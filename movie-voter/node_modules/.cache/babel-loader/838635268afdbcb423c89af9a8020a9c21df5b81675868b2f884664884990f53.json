{"ast":null,"code":"import { io } from \"socket.io-client\";\nexport let socket;\nexport function initSocketConnection(state, participants) {\n  socket = io(\"http://localhost:5000\", {\n    autoConnect: false\n  });\n  socket.auth = {\n    nickname: state.nickname\n  };\n  socket.connect();\n  socket.on(\"connect\", () => {\n    socket.emit(\"join\", state.roomID, state.nickname);\n  });\n  socket.on(\"disconnect\", () => {\n    console.log(\"DISCONNECTED: \", socket.id);\n  });\n  socket.on(\"session\", _ref => {\n    let {\n      sessionID,\n      userID\n    } = _ref;\n    socket.auth = {\n      sessionID\n    };\n    localStorage.setItem(\"sessionID\", sessionID);\n    socket.userID = userID;\n  });\n  socket.on(\"newUser\", nickname => {\n    console.log(nickname, \"has joined the room.\");\n    participants.current = [...participants.current, nickname];\n    console.log(participants.current);\n  });\n  socket.on(\"userDisconnect\", nickname => {\n    console.log(nickname, \"left.\");\n    participants.current = participants.current.splice(participants.current.findIndex(name => name === nickname), 1);\n    console.log(participants.current);\n  });\n}\nexport function disconnectSocket() {\n  socket.off(\"connect\");\n  socket.off(\"disconnect\");\n  socket.off(\"pong\");\n  socket.disconnect();\n}","map":{"version":3,"names":["io","socket","initSocketConnection","state","participants","autoConnect","auth","nickname","connect","on","emit","roomID","console","log","id","sessionID","userID","localStorage","setItem","current","splice","findIndex","name","disconnectSocket","off","disconnect"],"sources":["C:/Users/antho/Documents/Programming/WebDev/Movie Voter/movie-voter/src/services/Socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\r\n\r\nexport let socket;\r\n\r\nexport function initSocketConnection(state, participants) {\r\n  socket = io(\"http://localhost:5000\", { autoConnect: false });\r\n  socket.auth = { nickname: state.nickname };\r\n  socket.connect();\r\n\r\n  socket.on(\"connect\", () => {\r\n    socket.emit(\"join\", state.roomID, state.nickname);\r\n  });\r\n\r\n  socket.on(\"disconnect\", () => {\r\n    console.log(\"DISCONNECTED: \", socket.id);\r\n  });\r\n\r\n  socket.on(\"session\", ({ sessionID, userID }) => {\r\n    socket.auth = { sessionID };\r\n    localStorage.setItem(\"sessionID\", sessionID);\r\n    socket.userID = userID;\r\n  });\r\n  socket.on(\"newUser\", (nickname) => {\r\n    console.log(nickname, \"has joined the room.\");\r\n    participants.current = [...participants.current, nickname];\r\n    console.log(participants.current);\r\n  });\r\n\r\n  socket.on(\"userDisconnect\", (nickname) => {\r\n    console.log(nickname, \"left.\");\r\n    participants.current = participants.current.splice(\r\n      participants.current.findIndex((name) => name === nickname),\r\n      1\r\n    );\r\n    console.log(participants.current);\r\n  });\r\n}\r\n\r\nexport function disconnectSocket() {\r\n  socket.off(\"connect\");\r\n  socket.off(\"disconnect\");\r\n  socket.off(\"pong\");\r\n  socket.disconnect();\r\n}\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,OAAO,IAAIC,MAAM;AAEjB,OAAO,SAASC,oBAAoB,CAACC,KAAK,EAAEC,YAAY,EAAE;EACxDH,MAAM,GAAGD,EAAE,CAAC,uBAAuB,EAAE;IAAEK,WAAW,EAAE;EAAM,CAAC,CAAC;EAC5DJ,MAAM,CAACK,IAAI,GAAG;IAAEC,QAAQ,EAAEJ,KAAK,CAACI;EAAS,CAAC;EAC1CN,MAAM,CAACO,OAAO,EAAE;EAEhBP,MAAM,CAACQ,EAAE,CAAC,SAAS,EAAE,MAAM;IACzBR,MAAM,CAACS,IAAI,CAAC,MAAM,EAAEP,KAAK,CAACQ,MAAM,EAAER,KAAK,CAACI,QAAQ,CAAC;EACnD,CAAC,CAAC;EAEFN,MAAM,CAACQ,EAAE,CAAC,YAAY,EAAE,MAAM;IAC5BG,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEZ,MAAM,CAACa,EAAE,CAAC;EAC1C,CAAC,CAAC;EAEFb,MAAM,CAACQ,EAAE,CAAC,SAAS,EAAE,QAA2B;IAAA,IAA1B;MAAEM,SAAS;MAAEC;IAAO,CAAC;IACzCf,MAAM,CAACK,IAAI,GAAG;MAAES;IAAU,CAAC;IAC3BE,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEH,SAAS,CAAC;IAC5Cd,MAAM,CAACe,MAAM,GAAGA,MAAM;EACxB,CAAC,CAAC;EACFf,MAAM,CAACQ,EAAE,CAAC,SAAS,EAAGF,QAAQ,IAAK;IACjCK,OAAO,CAACC,GAAG,CAACN,QAAQ,EAAE,sBAAsB,CAAC;IAC7CH,YAAY,CAACe,OAAO,GAAG,CAAC,GAAGf,YAAY,CAACe,OAAO,EAAEZ,QAAQ,CAAC;IAC1DK,OAAO,CAACC,GAAG,CAACT,YAAY,CAACe,OAAO,CAAC;EACnC,CAAC,CAAC;EAEFlB,MAAM,CAACQ,EAAE,CAAC,gBAAgB,EAAGF,QAAQ,IAAK;IACxCK,OAAO,CAACC,GAAG,CAACN,QAAQ,EAAE,OAAO,CAAC;IAC9BH,YAAY,CAACe,OAAO,GAAGf,YAAY,CAACe,OAAO,CAACC,MAAM,CAChDhB,YAAY,CAACe,OAAO,CAACE,SAAS,CAAEC,IAAI,IAAKA,IAAI,KAAKf,QAAQ,CAAC,EAC3D,CAAC,CACF;IACDK,OAAO,CAACC,GAAG,CAACT,YAAY,CAACe,OAAO,CAAC;EACnC,CAAC,CAAC;AACJ;AAEA,OAAO,SAASI,gBAAgB,GAAG;EACjCtB,MAAM,CAACuB,GAAG,CAAC,SAAS,CAAC;EACrBvB,MAAM,CAACuB,GAAG,CAAC,YAAY,CAAC;EACxBvB,MAAM,CAACuB,GAAG,CAAC,MAAM,CAAC;EAClBvB,MAAM,CAACwB,UAAU,EAAE;AACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}