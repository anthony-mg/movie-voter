{"ast":null,"code":"import { io } from \"socket.io-client\";\nexport let socket;\nexport function initSocketConnection(state, participants) {\n  socket = io(\"http://localhost:5000\", {\n    autoConnect: false\n  });\n  socket.auth = {\n    nickname: state.nickname,\n    roomID: state.roomID\n  };\n  socket.connect();\n\n  //Fired by server when a socket joins a room. Send client list of current participants in the room\n  socket.on(\"joinedRoom\", parts => {\n    participants.current = parts.map(participantObject => participantObject.nickname);\n    console.log(\"Participants at event joinedRoom:\", participants.current);\n  });\n\n  //New user joined the room. Add to participants.\n  socket.on(\"newUser\", nickname => {\n    console.log(nickname, \"has joined the room.\");\n    participants.current = [...participants.current, nickname];\n    console.log(participants.current);\n  });\n\n  //User left. Remove from participants\n  socket.on(\"userDisconnect\", nickname => {\n    console.log(nickname, \"left.\");\n    participants.current = participants.current.filter(name => name !== nickname);\n    console.log(participants.current);\n  });\n}\n\n//useEffect cleanup function. Ensures only one connection is made even after re-renders\nexport function disconnectSocket() {\n  socket.off(\"connect\");\n  socket.off(\"disconnect\");\n  socket.off(\"pong\");\n  socket.disconnect();\n}","map":{"version":3,"names":["io","socket","initSocketConnection","state","participants","autoConnect","auth","nickname","roomID","connect","on","parts","current","map","participantObject","console","log","filter","name","disconnectSocket","off","disconnect"],"sources":["C:/Users/antho/Documents/Programming/WebDev/Movie Voter/movie-voter/src/services/Socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\r\n\r\nexport let socket;\r\n\r\nexport function initSocketConnection(state, participants) {\r\n  socket = io(\"http://localhost:5000\", { autoConnect: false });\r\n\r\n  socket.auth = { nickname: state.nickname, roomID: state.roomID };\r\n  socket.connect();\r\n\r\n\r\n  //Fired by server when a socket joins a room. Send client list of current participants in the room\r\n  socket.on(\"joinedRoom\", (parts) => {\r\n    participants.current = parts.map((participantObject) => participantObject.nickname);\r\n    console.log(\"Participants at event joinedRoom:\", participants.current);\r\n  });\r\n\r\n  //New user joined the room. Add to participants.\r\n  socket.on(\"newUser\", (nickname) => {\r\n    console.log(nickname, \"has joined the room.\");\r\n    participants.current = [...participants.current, nickname];\r\n    console.log(participants.current);\r\n  });\r\n\r\n  //User left. Remove from participants\r\n  socket.on(\"userDisconnect\", (nickname) => {\r\n    console.log(nickname, \"left.\");\r\n    participants.current = participants.current.filter((name) => name !== nickname);\r\n    console.log(participants.current);\r\n  });\r\n}\r\n\r\n//useEffect cleanup function. Ensures only one connection is made even after re-renders\r\nexport function disconnectSocket() {\r\n  socket.off(\"connect\");\r\n  socket.off(\"disconnect\");\r\n  socket.off(\"pong\");\r\n  socket.disconnect();\r\n}\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,OAAO,IAAIC,MAAM;AAEjB,OAAO,SAASC,oBAAoB,CAACC,KAAK,EAAEC,YAAY,EAAE;EACxDH,MAAM,GAAGD,EAAE,CAAC,uBAAuB,EAAE;IAAEK,WAAW,EAAE;EAAM,CAAC,CAAC;EAE5DJ,MAAM,CAACK,IAAI,GAAG;IAAEC,QAAQ,EAAEJ,KAAK,CAACI,QAAQ;IAAEC,MAAM,EAAEL,KAAK,CAACK;EAAO,CAAC;EAChEP,MAAM,CAACQ,OAAO,EAAE;;EAGhB;EACAR,MAAM,CAACS,EAAE,CAAC,YAAY,EAAGC,KAAK,IAAK;IACjCP,YAAY,CAACQ,OAAO,GAAGD,KAAK,CAACE,GAAG,CAAEC,iBAAiB,IAAKA,iBAAiB,CAACP,QAAQ,CAAC;IACnFQ,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEZ,YAAY,CAACQ,OAAO,CAAC;EACxE,CAAC,CAAC;;EAEF;EACAX,MAAM,CAACS,EAAE,CAAC,SAAS,EAAGH,QAAQ,IAAK;IACjCQ,OAAO,CAACC,GAAG,CAACT,QAAQ,EAAE,sBAAsB,CAAC;IAC7CH,YAAY,CAACQ,OAAO,GAAG,CAAC,GAAGR,YAAY,CAACQ,OAAO,EAAEL,QAAQ,CAAC;IAC1DQ,OAAO,CAACC,GAAG,CAACZ,YAAY,CAACQ,OAAO,CAAC;EACnC,CAAC,CAAC;;EAEF;EACAX,MAAM,CAACS,EAAE,CAAC,gBAAgB,EAAGH,QAAQ,IAAK;IACxCQ,OAAO,CAACC,GAAG,CAACT,QAAQ,EAAE,OAAO,CAAC;IAC9BH,YAAY,CAACQ,OAAO,GAAGR,YAAY,CAACQ,OAAO,CAACK,MAAM,CAAEC,IAAI,IAAKA,IAAI,KAAKX,QAAQ,CAAC;IAC/EQ,OAAO,CAACC,GAAG,CAACZ,YAAY,CAACQ,OAAO,CAAC;EACnC,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASO,gBAAgB,GAAG;EACjClB,MAAM,CAACmB,GAAG,CAAC,SAAS,CAAC;EACrBnB,MAAM,CAACmB,GAAG,CAAC,YAAY,CAAC;EACxBnB,MAAM,CAACmB,GAAG,CAAC,MAAM,CAAC;EAClBnB,MAAM,CAACoB,UAAU,EAAE;AACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}