{"ast":null,"code":"var _s = $RefreshSig$();\nimport { io } from \"socket.io-client\";\nexport let socket;\nimport { useNavigate } from \"react-router-dom\";\nexport function initSocketConnection(state, participants) {\n  _s();\n  const navigate = useNavigate();\n  if (!state.nickname) {\n    navigate(\"/\");\n  }\n  socket = io(\"http://localhost:5000\");\n\n  //Join room on connect\n  socket.on(\"connect\", () => {\n    socket.emit(\"join\", state.roomID, state.nickname);\n  });\n\n  //New user joined the room. Add to participants.\n  socket.on(\"newUser\", nickname => {\n    console.log(nickname, \"has joined the room.\");\n    participants.current = [...participants.current, nickname];\n  });\n\n  //User left. Remove from participants\n  socket.on(\"userDisconnect\", nickname => {\n    console.log(nickname, \"left.\");\n    participants.current = participants.current.splice(participants.current.findIndex(name => name === nickname), 1);\n    console.log(participants.current);\n  });\n}\n\n//useEffect cleanup function. Ensures only one connection is made even after re-renders\n_s(initSocketConnection, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\nexport function disconnectSocket() {\n  socket.off(\"connect\");\n  socket.off(\"disconnect\");\n  socket.off(\"pong\");\n  socket.disconnect();\n}","map":{"version":3,"names":["io","socket","useNavigate","initSocketConnection","state","participants","navigate","nickname","on","emit","roomID","console","log","current","splice","findIndex","name","disconnectSocket","off","disconnect"],"sources":["C:/Users/antho/Documents/Programming/WebDev/Movie Voter/movie-voter/src/services/Socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\r\n\r\nexport let socket;\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport function initSocketConnection(state, participants) {\r\n  const navigate = useNavigate();\r\n  if (!state.nickname) {\r\n    navigate(\"/\");\r\n  }\r\n  socket = io(\"http://localhost:5000\");\r\n\r\n  //Join room on connect\r\n  socket.on(\"connect\", () => {\r\n    socket.emit(\"join\", state.roomID, state.nickname);\r\n  });\r\n\r\n  //New user joined the room. Add to participants.\r\n  socket.on(\"newUser\", (nickname) => {\r\n    console.log(nickname, \"has joined the room.\");\r\n    participants.current = [...participants.current, nickname];\r\n  });\r\n\r\n  //User left. Remove from participants\r\n  socket.on(\"userDisconnect\", (nickname) => {\r\n    console.log(nickname, \"left.\");\r\n    participants.current = participants.current.splice(\r\n      participants.current.findIndex((name) => name === nickname),\r\n      1\r\n    );\r\n    console.log(participants.current);\r\n  });\r\n}\r\n\r\n//useEffect cleanup function. Ensures only one connection is made even after re-renders\r\nexport function disconnectSocket() {\r\n  socket.off(\"connect\");\r\n  socket.off(\"disconnect\");\r\n  socket.off(\"pong\");\r\n  socket.disconnect();\r\n}\r\n"],"mappings":";AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,OAAO,IAAIC,MAAM;AACjB,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,OAAO,SAASC,oBAAoB,CAACC,KAAK,EAAEC,YAAY,EAAE;EAAA;EACxD,MAAMC,QAAQ,GAAGJ,WAAW,EAAE;EAC9B,IAAI,CAACE,KAAK,CAACG,QAAQ,EAAE;IACnBD,QAAQ,CAAC,GAAG,CAAC;EACf;EACAL,MAAM,GAAGD,EAAE,CAAC,uBAAuB,CAAC;;EAEpC;EACAC,MAAM,CAACO,EAAE,CAAC,SAAS,EAAE,MAAM;IACzBP,MAAM,CAACQ,IAAI,CAAC,MAAM,EAAEL,KAAK,CAACM,MAAM,EAAEN,KAAK,CAACG,QAAQ,CAAC;EACnD,CAAC,CAAC;;EAEF;EACAN,MAAM,CAACO,EAAE,CAAC,SAAS,EAAGD,QAAQ,IAAK;IACjCI,OAAO,CAACC,GAAG,CAACL,QAAQ,EAAE,sBAAsB,CAAC;IAC7CF,YAAY,CAACQ,OAAO,GAAG,CAAC,GAAGR,YAAY,CAACQ,OAAO,EAAEN,QAAQ,CAAC;EAC5D,CAAC,CAAC;;EAEF;EACAN,MAAM,CAACO,EAAE,CAAC,gBAAgB,EAAGD,QAAQ,IAAK;IACxCI,OAAO,CAACC,GAAG,CAACL,QAAQ,EAAE,OAAO,CAAC;IAC9BF,YAAY,CAACQ,OAAO,GAAGR,YAAY,CAACQ,OAAO,CAACC,MAAM,CAChDT,YAAY,CAACQ,OAAO,CAACE,SAAS,CAAEC,IAAI,IAAKA,IAAI,KAAKT,QAAQ,CAAC,EAC3D,CAAC,CACF;IACDI,OAAO,CAACC,GAAG,CAACP,YAAY,CAACQ,OAAO,CAAC;EACnC,CAAC,CAAC;AACJ;;AAEA;AAAA,GA7BgBV,oBAAoB;EAAA,QACjBD,WAAW;AAAA;AA6B9B,OAAO,SAASe,gBAAgB,GAAG;EACjChB,MAAM,CAACiB,GAAG,CAAC,SAAS,CAAC;EACrBjB,MAAM,CAACiB,GAAG,CAAC,YAAY,CAAC;EACxBjB,MAAM,CAACiB,GAAG,CAAC,MAAM,CAAC;EAClBjB,MAAM,CAACkB,UAAU,EAAE;AACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}