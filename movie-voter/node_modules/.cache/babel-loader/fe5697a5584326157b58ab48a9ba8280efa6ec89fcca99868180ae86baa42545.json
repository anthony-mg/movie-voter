{"ast":null,"code":"import { io } from \"socket.io-client\";\nexport let socket;\nexport function initSocketConnection(state, participants, setParticipants) {\n  let url = process.env.REACT_APP_SERVER_URL + \":\" + process.env.REACT_APP_SERVER_;\n  socket = io(url, {\n    autoConnect: false\n  });\n  socket.auth = {\n    nickname: state.nickname,\n    roomID: state.roomID\n  };\n  socket.connect();\n\n  //New user joined the room. Add to participants.\n  socket.on(\"newUser\", currentParticipants => {\n    setParticipants([...currentParticipants]);\n  });\n\n  //User left. Remove from participants\n  socket.on(\"userDisconnect\", currentParticipants => {\n    setParticipants(currentParticipants);\n  });\n  return socket;\n}\n\n//useEffect cleanup function. Ensures only one connection is made even after re-renders\nexport function disconnectSocket(socket) {\n  socket.off(\"connect\");\n  socket.off(\"disconnect\");\n  socket.off(\"pong\");\n  socket.disconnect();\n}","map":{"version":3,"names":["io","socket","initSocketConnection","state","participants","setParticipants","url","process","env","REACT_APP_SERVER_URL","REACT_APP_SERVER_","autoConnect","auth","nickname","roomID","connect","on","currentParticipants","disconnectSocket","off","disconnect"],"sources":["C:/Users/antho/Documents/Programming/WebDev/Movie Voter/movie-voter/src/services/Socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\r\n\r\nexport let socket;\r\n\r\nexport function initSocketConnection(state, participants, setParticipants) {\r\n  let url = process.env.REACT_APP_SERVER_URL + \":\" + process.env.REACT_APP_SERVER_;\r\n\r\n  socket = io(url, { autoConnect: false });\r\n\r\n  socket.auth = { nickname: state.nickname, roomID: state.roomID };\r\n  socket.connect();\r\n\r\n  //New user joined the room. Add to participants.\r\n  socket.on(\"newUser\", (currentParticipants) => {\r\n    setParticipants([...currentParticipants]);\r\n  });\r\n\r\n  //User left. Remove from participants\r\n  socket.on(\"userDisconnect\", (currentParticipants) => {\r\n    setParticipants(currentParticipants);\r\n  });\r\n  return socket;\r\n}\r\n\r\n//useEffect cleanup function. Ensures only one connection is made even after re-renders\r\nexport function disconnectSocket(socket) {\r\n  socket.off(\"connect\");\r\n  socket.off(\"disconnect\");\r\n  socket.off(\"pong\");\r\n  socket.disconnect();\r\n}\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,OAAO,IAAIC,MAAM;AAEjB,OAAO,SAASC,oBAAoB,CAACC,KAAK,EAAEC,YAAY,EAAEC,eAAe,EAAE;EACzE,IAAIC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,GAAG,GAAG,GAAGF,OAAO,CAACC,GAAG,CAACE,iBAAiB;EAEhFT,MAAM,GAAGD,EAAE,CAACM,GAAG,EAAE;IAAEK,WAAW,EAAE;EAAM,CAAC,CAAC;EAExCV,MAAM,CAACW,IAAI,GAAG;IAAEC,QAAQ,EAAEV,KAAK,CAACU,QAAQ;IAAEC,MAAM,EAAEX,KAAK,CAACW;EAAO,CAAC;EAChEb,MAAM,CAACc,OAAO,EAAE;;EAEhB;EACAd,MAAM,CAACe,EAAE,CAAC,SAAS,EAAGC,mBAAmB,IAAK;IAC5CZ,eAAe,CAAC,CAAC,GAAGY,mBAAmB,CAAC,CAAC;EAC3C,CAAC,CAAC;;EAEF;EACAhB,MAAM,CAACe,EAAE,CAAC,gBAAgB,EAAGC,mBAAmB,IAAK;IACnDZ,eAAe,CAACY,mBAAmB,CAAC;EACtC,CAAC,CAAC;EACF,OAAOhB,MAAM;AACf;;AAEA;AACA,OAAO,SAASiB,gBAAgB,CAACjB,MAAM,EAAE;EACvCA,MAAM,CAACkB,GAAG,CAAC,SAAS,CAAC;EACrBlB,MAAM,CAACkB,GAAG,CAAC,YAAY,CAAC;EACxBlB,MAAM,CAACkB,GAAG,CAAC,MAAM,CAAC;EAClBlB,MAAM,CAACmB,UAAU,EAAE;AACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}